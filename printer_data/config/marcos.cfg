[gcode_macro START_PRINT]
gcode:
		G90                                                    ; Absolute positionering
		M83                                                    ; Relatieve extrusie
		M140 S[bed_temperature_initial_layer_single]          ; Bed opwarmen starten
		M104 S[nozzle_temperature_initial_layer]              ; Hotend opwarmen starten
		G28                                                    ; Home alle assen
		BED_MESH_PROFILE LOAD=default                         ; Laad opgeslagen bed mesh
		M190 S[bed_temperature_initial_layer_single]          ; Wacht tot bed op temperatuur
		M109 S[nozzle_temperature_initial_layer]              ; Wacht tot hotend op temperatuur
		G1 Z2.0 F3000                                         ; Z omhoog naar 2mm
		G1 X10 Y10 F5000                                      ; Ga naar startpositie
		G1 Z0.3 F300                                          ; Z naar eerste laag hoogte
		G92 E0                                                ; Reset extruder positie
		G1 Y200 E15 F1500                                     ; Purge line heen
		G1 X10.4 F5000                                        ; Verschuif 0.4mm
		G1 Y10 E15 F1500                                      ; Purge line terug
		G92 E0  

[gcode_macro END_PRINT]
gcode:
    G91 
    G1 X5 Y{print_bed_max[1]*0.8} F{travel_speed*60} ; present print
	{if max_layer_z < printable_height-10}G1 Z{z_offset+min(max_layer_z+20, printable_height-10)} F600 ; Move print head further up{endif}
	M140 S0 ; turn off heatbed
	M104 S0 ; turn off temperature
	M107 ; turn off fan
	M84 X Y E ; disable motors
    M117 Print voltooid!

[gcode_macro PREHEAT_PLA]
gcode:
    M140 S60
    M104 S200
    M106 S64
    M117 Opwarmen voor PLA...

[gcode_macro PREHEAT_PETG]
gcode:
    M140 S85
    M104 S240
    M106 S64
    M117 Opwarmen voor PETG...

[gcode_macro BED_LEVEL]
gcode:
    G28
    SCREWS_TILT_CALCULATE
    M117 Pas bedschroeven aan!

[gcode_macro BED_MESH]
gcode:
    M140 S60
    G28
    M190 S60
    BED_MESH_CALIBRATE
    SAVE_CONFIG

[gcode_macro NOZZLE_CHANGE]
gcode:
    G28
    G90
    G1 Z125 F300
    M104 S0
    M84 E
    M117 Klaar voor nozzle wissel

[gcode_macro PID_TUNE_HOTEND]
gcode:
    M106 S255
    PID_CALIBRATE HEATER=extruder TARGET=210
    M106 S0
    SAVE_CONFIG

[gcode_macro PID_TUNE_BED]
gcode:
    PID_CALIBRATE HEATER=heater_bed TARGET=60
    SAVE_CONFIG

